<!DOCTYPE html>
<html>

<head>
    <title>Music Spider - First Time Authentication</title>
    <script>
        function copyURI() {
        // Get the text field
        var copyText = document.getElementById("URI");

        // Select the text field
        copyText.select();
        copyText.setSelectionRange(0, 99999); // For mobile devices

        // Copy the text inside the text field
        navigator.clipboard.writeText(copyText.value);

        // Alert the copied text
        // alert("Copied the text: " + copyText.value);
}
    </script>
    <style>
        h1 {text-align: center;}
        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 15%;
        }
        </style>
</head>

<body>
    <a href="https://github.com/cparsell/music-spider">
        <img src="https://i.postimg.cc/HkVc4bCq/music-spider-logo-nobg.png" class="center" />
    </a>
    <br />
    <h1>Music Spider - First Time Authentication</h1>
    <ol>
        <li>
            <p>
                You should have created an app called <strong>Music Spider</strong> in the
                <a href="https://developer.spotify.com/dashboard/applications" target="_blank" rel="noopener noreferrer">
                    Spotify API App Dashboard
                </a>.
            </p>
            <p>
                Navigate to the settings for this app.
            </p>
            <p>
                For more information, see
                <a href="https://developer.spotify.com/documentation/general/guides/app-settings/">
                    Spotify's Development Guide
                </a>.
            </p>
            <br /><br />
        </li>
        <li>
            <p>
                Add <strong>the following URI</strong> to the <strong>'Redirect URIs'</strong> field,
                found under "Edit Settings":
                <br />
                <code><strong>
                    <!-- The text field -->
                    <input type="text" value="<?= ScriptApp.getService().getUrl() ?>" id="URI" style='background:#f8f8f8; display:block; width:80%; font-weight:600;font-family: monospace;'>

                    <!-- The button used to copy the text -->
                    <button onclick="copyURI()">Copy URI</button>
                </strong></code>
            </p><p><strong>NOTE: Do not copy the URL from the address bar as it can be slightly different</strong></p>
            <p>
                
            </p><br /><br />
        </li>
        <li>
            <p>
                Go to the following URL, log into the desired user's Spotify
                account, and approve access:
                <br />
                <a href="<?= generateAuthUrl() ?>" target="_blank" rel="noopener noreferrer">
                    <?= generateAuthUrl() ?>
                </a>
            </p>
        </li><br /><br />
        <li>
            You should be redirected back to a success page on Google App Script.
        </li>
    </ol>
</body>

</html>
